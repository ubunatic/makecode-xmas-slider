namespace SpriteKind {
    export const Ground = SpriteKind.create()
    export const Tree = SpriteKind.create()
}
function addGroundAt (x: number, y: number) {
    _ground = sprites.create(grounds[randint(0, 2)], SpriteKind.Ground)
    _ground.left = x
    _ground.top = y
    _ground.image.fillRect(0, 60, 160, 120, 1)
    return _ground
}
function updatePlayer (sprite: Sprite) {
    if (_jump > 0 && controller.A.isPressed()) {
        _jump += 1
        sprite.vy = sprite.vy * 0.97
    } else if (_jump > 0) {
        _jump = 0
        sprite.vy = sprite.vy * 0.5
    } else {
        _jump = 0
    }
    if (_jump > 30) {
        _jump = 0
    }
    if (_jump == 0) {
        sprite.ay = gravity
    }
    if (sprite.x > 40) {
        sprite.vx = 0
    }
    if (isOnGround(sprite)) {
        if (_ground_time == 0 && sprite.vy > 10) {
            sprite.startEffect(effects.blizzard, 500)
        }
        putOnGround(sprite)
        _ground_time = 5
        if (controller.A.isPressed()) {
            jump(santa)
        } else {
            sprite.vy = 20
        }
    } else {
        _ground_time = Math.max(0, _ground_time - 1)
    }
    debug()
}
function updateSpeedMeter () {
    speed_meter.setText("" + Math.round(speed * 10 + Math.max(0, 0.1 * santa.vy)) + " km/h")
}
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    if (isOnGround(santa) || _ground_time > 0) {
        jump(santa)
    }
})
function limitSpeed () {
    speed = Math.constrain(speed, 0, 5)
}
controller.right.onEvent(ControllerButtonEvent.Repeated, function () {
    speed += 0.1
})
controller.left.onEvent(ControllerButtonEvent.Pressed, function () {
    speed += -0.2
})
function bounce (sprite: Sprite, ratio: number) {
    sprite.vy = sprite.vy * ratio
}
function isOnGround (sprite: Sprite) {
    return sprite.overlapsWith(ground) || sprite.overlapsWith(ground_next)
}
sprites.onOverlap(SpriteKind.Tree, SpriteKind.Ground, function (sprite, otherSprite) {
    sprite.setVelocity(0, 0)
})
controller.right.onEvent(ControllerButtonEvent.Pressed, function () {
    speed += 0.1
})
function debug () {
    if (_debug) {
        _debug_text.setText("gt=" + _ground_time + " vy=" + Math.round(santa.vy) + " obs=" + obstacles.length)
    }
}
function moveGround () {
    move(ground)
    move(ground_next)
    if (ground.left <= 0 - scene.screenWidth()) {
        ground.destroy()
        ground = ground_next
        ground_next = addGroundAt(ground.right, 90)
        addObstacles()
    }
    for (let value of obstacles) {
        move(value)
    }
}
function jump (sprite: Sprite) {
    if (_jump == 0) {
        putOnGround(sprite)
        sprite.ay = 0
        sprite.vy = -100
        sprite.startEffect(effects.blizzard, 500)
        _jump = 2
    }
}
function addTree () {
    _obj = sprites.create(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . 7 . . . . . . . . 
        . . . . . . 7 6 7 . . . . . . . 
        . . . . . . 6 7 6 . . . . . . . 
        . . . . . 7 7 6 7 7 . . . . . . 
        . . . . . 7 6 7 6 6 . . . . . . 
        . . . . . 7 6 7 7 7 7 . . . . . 
        . . . . 7 6 7 7 6 6 7 . . . . . 
        . . . . 6 7 7 6 7 7 6 . . . . . 
        . . . . 7 6 6 7 6 7 7 7 . . . . 
        . . . 6 6 7 7 6 6 6 6 7 7 . . . 
        . . . . . . . 6 . . . . . . . . 
        . . . . . . . e . . . . . . . . 
        . . . . . . . e . . . . . . . . 
        . . . . . . . d . . . . . . . . 
        . . . . . . . 1 . . . . . . . . 
        `, SpriteKind.Tree)
    _obj.setPosition(randint(ground_next.left, ground_next.left + scene.screenWidth()), ground_next.top)
    _obj.vy = 300 / speed
    obstacles.push(_obj)
}
function putOnGround (sprite: Sprite) {
    while (isOnGround(sprite)) {
        sprite.y += -1
    }
}
function move (sprite: Sprite) {
    sprite.left += -1 * speed
    sprite.top += -0.375 * speed
}
function addObstacles () {
    addTree()
    if (obstacles.length > 10) {
        obstacles.shift().destroy()
    }
}
controller.left.onEvent(ControllerButtonEvent.Repeated, function () {
    speed += -0.2
})
let _obj: Sprite = null
let _jump = 0
let _ground: Sprite = null
let _debug = false
let _ground_time = 0
let obstacles: Sprite[] = []
let _debug_text: TextSprite = null
let speed_meter: TextSprite = null
let speed = 0
let ground_next: Sprite = null
let ground: Sprite = null
let santa: Sprite = null
let grounds: Image[] = []
let gravity = 0
gravity = 200
grounds = [img`
    ................................................................................................................................................................
    1111............................................................................................................................................................
    111111..........................................................................................................................................................
    1111111.........................................................................................................................................................
    111111111.......................................................................................................................................................
    11111111111.....................................................................................................................................................
    111111111111....................................................................................................................................................
    1111111111111...................................................................................................................................................
    111111111111111111..............................................................................................................................................
    111111111111111111111...........................................................................................................................................
    11111111111111111111111111111...................................................................................................................................
    111111111111111111111111111111111111............................................................................................................................
    1111111111111111111111111111111111111111........................................................................................................................
    1111111111111111111111111111111111111111111.....................................................................................................................
    1111111111111111111111111111111111111111111111..................................................................................................................
    1111111111111111111111111111111111111111111111111...............................................................................................................
    1111111111111111111111111111111111111111111111111111............................................................................................................
    1111111111111111111111111111111111111111111111111111111.........................................................................................................
    1111111111111111111111111111111111111111111111111111111111......................................................................................................
    111111111111111111111111111111111111111111111111111111111111....................................................................................................
    111111111111111111111111111111111111111111111111111111111111111.................................................................................................
    1111111111111111111111111111111111111111111111111111111111111111................................................................................................
    111111111111111111111111111111111111111111111111111111111111111111..............................................................................................
    1111111111111111111111111111111111111111111111111111111111111111111111..........................................................................................
    111111111111111111111111111111111111111111111111111111111111111111111111........................................................................................
    111111111111111111111111111111111111111111111111111111111111111111111111111.....................................................................................
    111111111111111111111111111111111111111111111111111111111111111111111111111111..................................................................................
    11111111111111111111111111111111111111111111111111111111111111111111111111111111................................................................................
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111..............................................................................
    111111111111111111111111111111111111111111111111111111111111111111111111111111111111............................................................................
    111111111111111111111111111111111111111111111111111111111111111111111111111111111111111.........................................................................
    11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111.......................................................................
    111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111......................................................................
    11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111....................................................................
    111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111...................................................................
    11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111.................................................................
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111...............................................................
    111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111.............................................................
    11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111...........................................................
    11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111........................................................
    11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111.....................................................
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111.............................................
    11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111................................
    111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111............................
    111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111.........................
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111........................
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111.....................
    11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111....................
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111..................
    111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111................
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111...............
    11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111..............
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111............
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111............
    111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111..........
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111.........
    111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111.......
    11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111.....
    11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111..
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    `, img`
    ................................................................................................................................................................
    1111............................................................................................................................................................
    111111..........................................................................................................................................................
    1111111111111...................................................................................................................................................
    1111111111111111................................................................................................................................................
    111111111111111111111...........................................................................................................................................
    11111111111111111111111.........................................................................................................................................
    1111111111111111111111111.......................................................................................................................................
    11111111111111111111111111......................................................................................................................................
    1111111111111111111111111111....................................................................................................................................
    11111111111111111111111111111...................................................................................................................................
    11111111111111111111111111111111................................................................................................................................
    1111111111111111111111111111111111..............................................................................................................................
    11111111111111111111111111111111111.............................................................................................................................
    111111111111111111111111111111111111111111111...................................................................................................................
    111111111111111111111111111111111111111111111111................................................................................................................
    111111111111111111111111111111111111111111111111111.............................................................................................................
    1111111111111111111111111111111111111111111111111111............................................................................................................
    111111111111111111111111111111111111111111111111111111..........................................................................................................
    11111111111111111111111111111111111111111111111111111111........................................................................................................
    111111111111111111111111111111111111111111111111111111111.......................................................................................................
    1111111111111111111111111111111111111111111111111111111111......................................................................................................
    11111111111111111111111111111111111111111111111111111111111.....................................................................................................
    111111111111111111111111111111111111111111111111111111111111....................................................................................................
    11111111111111111111111111111111111111111111111111111111111111..................................................................................................
    1111111111111111111111111111111111111111111111111111111111111111................................................................................................
    111111111111111111111111111111111111111111111111111111111111111111..............................................................................................
    111111111111111111111111111111111111111111111111111111111111111111111...........................................................................................
    1111111111111111111111111111111111111111111111111111111111111111111111111.......................................................................................
    1111111111111111111111111111111111111111111111111111111111111111111111111111....................................................................................
    111111111111111111111111111111111111111111111111111111111111111111111111111111..................................................................................
    1111111111111111111111111111111111111111111111111111111111111111111111111111111.................................................................................
    111111111111111111111111111111111111111111111111111111111111111111111111111111111...............................................................................
    11111111111111111111111111111111111111111111111111111111111111111111111111111111111.............................................................................
    111111111111111111111111111111111111111111111111111111111111111111111111111111111111............................................................................
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111...........................................................................
    111111111111111111111111111111111111111111111111111111111111111111111111111111111111111.........................................................................
    111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111......................................................................
    11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111....................................................................
    11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111.................................................................
    11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111..............................................................
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111.........................................................
    11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111.....................................................
    11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111...................................
    11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111.............................
    11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111.......................
    11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111....................
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111..................
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111...............
    111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111.............
    11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111...........
    111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111..........
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111.........
    11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111........
    111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111.......
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111......
    11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111.....
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111...
    111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111.
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    `, img`
    ................................................................................................................................................................
    1111............................................................................................................................................................
    111111..........................................................................................................................................................
    1111111.........................................................................................................................................................
    111111111.......................................................................................................................................................
    11111111111.....................................................................................................................................................
    111111111111....................................................................................................................................................
    1111111111111...................................................................................................................................................
    1111111111111111111.............................................................................................................................................
    111111111111111111111...........................................................................................................................................
    11111111111111111111111.........................................................................................................................................
    111111111111111111111111........................................................................................................................................
    1111111111111111111111111.......................................................................................................................................
    111111111111111111111111111.....................................................................................................................................
    1111111111111111111111111111....................................................................................................................................
    11111111111111111111111111111...................................................................................................................................
    111111111111111111111111111111..................................................................................................................................
    1111111111111111111111111111111.................................................................................................................................
    1111111111111111111111111111111.................................................................................................................................
    11111111111111111111111111111111................................................................................................................................
    11111111111111111111111111111111................................................................................................................................
    11111111111111111111111111111111................................................................................................................................
    111111111111111111111111111111111...............................................................................................................................
    1111111111111111111111111111111111..............................................................................................................................
    11111111111111111111111111111111111.............................................................................................................................
    111111111111111111111111111111111111............................................................................................................................
    111111111111111111111111111111111111............................................................................................................................
    1111111111111111111111111111111111111...........................................................................................................................
    1111111111111111111111111111111111111...........................................................................................................................
    11111111111111111111111111111111111111..........................................................................................................................
    111111111111111111111111111111111111111.........................................................................................................................
    111111111111111111111111111111111111111.........................................................................................................................
    111111111111111111111111111111111111111.........................................................................................................................
    1111111111111111111111111111111111111111........................................................................................................................
    11111111111111111111111111111111111111111.......................................................................................................................
    111111111111111111111111111111111111111111......................................................................................................................
    111111111111111111111111111111111111111111......................................................................................................................
    1111111111111111111111111111111111111111111.....................................................................................................................
    111111111111111111111111111111111111111111111...................................................................................................................
    11111111111111111111111111111111111111111111111.................................................................................................................
    1111111111111111111111111111111111111111111111111111............................................................................................................
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111........................................................................
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111.....................................................................
    111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111................................................................
    11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111............................................
    111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111........................................
    11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111......................................
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111....................................
    11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111................................
    111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111...............................
    111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111............................
    111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111.........................
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111........................
    11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111.......................
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111..................
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111............
    111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111.......
    111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111....
    11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111..
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    `]
santa = sprites.create(img`
    . . . . 2 2 . . . . . . . . . . 
    . . . 2 2 2 2 . . . . . . . . . 
    . . 2 2 1 d d . . . . . . . . . 
    . 1 . . 1 1 d 1 . . . . . . . . 
    . . . c c 1 1 1 . . . . . . . . 
    . . b e b c 2 1 . . . . . . . . 
    . b e e b e 2 2 d b . . . . . . 
    . e e e c b e e e . b b . . . . 
    . . e c b 2 2 2 2 2 . . b b f . 
    . . . 4 e 4 e 4 c c 4 e 4 . f . 
    . . . . . f . . c c c . . f f . 
    . . . f f f f f f f f f f f . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    `, SpriteKind.Player)
santa.setPosition(0, 0)
santa.vx = 50
santa.vy = 50
santa.ay = gravity
scene.setBackgroundColor(9)
ground = addGroundAt(0, 30)
ground_next = addGroundAt(scene.screenWidth(), 90)
speed = 2
speed_meter = textsprite.create("")
_debug_text = textsprite.create("", 1, 2)
speed_meter.left = 60
speed_meter.top = 2
_debug_text.bottom = scene.screenHeight()
_debug_text.left = 2
_debug_text.z = 1
obstacles = []
_ground_time = 0
_debug = false
game.onUpdate(function () {
    limitSpeed()
    moveGround()
    updatePlayer(santa)
    updateSpeedMeter()
})
